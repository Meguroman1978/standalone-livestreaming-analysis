# 特定ライブ配信分析・考察ツール

## 🌐 今すぐ使用する

**公開URL**: https://5000-ip2kbkxvu53507tra95yz-b9b802c4.sandbox.novita.ai

上記URLにアクセスすれば、**今すぐ誰でも無料で使用できます**！

## 概要
ライブコマース配信の動画、配信データ、視聴者コメントを統合的に分析し、売上とエンゲージメントを最大化するための専門的なレポートを自動生成するWebアプリケーションです。

### 🎯 2つの出力形式
1. **12スライドPowerPointレポート**（即座にダウンロード可能）
2. **Genspark AIスライド生成用プロンプト**（デザイン性の高いスライド作成用）

## 主な機能

### 📤 マルチファイルアップロード
- **動画ファイル**: MP4, MOV, AVI, MKV対応
- **配信データ**: CSV/Excel形式の時系列数値データ
- **コメントデータ**: CSV/Excel形式のタイムスタンプ付きコメント

### 🔍 高度な分析機能
1. **動画構造解析**: 1分ごとのキーフレーム抽出とシーン分析
2. **時系列データ分析**: 視聴者数、いいね、コメント、クリック数の推移分析
3. **ピーク検出**: 指標の急増ポイントと動画イベントの相関分析
4. **コメント分類**: 6カテゴリ（質問/驚き/ワクワク/挨拶/購入意志/その他）への自動分類
5. **統計サマリー**: 主要KPIの集計と可視化

### 📊 レポート生成
**v2.0 新機能:**
- ✅ **12スライドの詳細PowerPointレポート**
  - カバーページ（タイトル、配信概要）
  - 主要KPIサマリー（6指標）
  - 時系列分析（視聴者数、クリック数、エンゲージメント）
  - 単一指標分析（各指標の詳細分析）
  - 複数指標分析（相関分析）
  - コメント定量分析（6カテゴリ分類）
  - 総合考察（成功要因と課題）
  - アクションプラン（次回配信への提案）

- ✅ **Genspark AIスライド生成用プロンプト**
  - 時系列データサマリー
  - 単一指標分析（視聴者数、クリック数、チャット、いいね）
  - 複数指標分析（視聴×クリック相関、チャット×いいね連動）
  - コメント定量分析（6カテゴリ円グラフ + 定性分析）
  - 総合考察とアクションプラン
  - ワンクリックでコピー可能
  - Slack経由でGensparkユーザーに転送可能

## セットアップ手順

### 1. 依存関係のインストール
```bash
cd /home/user/webapp
pip install -r requirements.txt
```

### 2. アプリケーションの起動
```bash
python app.py
```

サーバーは `http://0.0.0.0:5000` で起動します。

### 3. ブラウザでアクセス
ブラウザで `http://localhost:5000` を開いてください。

## 使い方

### 簡単3ステップ！

#### ステップ1: ファイル準備
以下の3つのファイルを用意してください：

1. **ライブ動画ファイル**
   - 形式: MP4, MOV, AVI, MKV
   - **推奨サイズ: 50MB未満**
   - 内容: 実際のライブ配信の録画

2. **配信データ（分チャート）**
   - 形式: CSV または Excel (.xlsx, .xls)
   - 必須列: 経過時間(分)、視聴者数、いいね数、コメント数、クリック数
   - 例: 1分ごとの視聴者数やクリック数の推移データ

3. **コメントデータ**
   - 形式: CSV または Excel (.xlsx, .xls)
   - 必須列: コメント本文、タイムスタンプ
   - 推奨列: ユーザー名、メッセージID

#### ステップ2: アップロードと分析
1. [公開URL](https://5000-ip2kbkxvu53507tra95yz-b9b802c4.sandbox.novita.ai)にアクセス
2. 3つのファイルをアップロード
3. 「🚀 分析開始」ボタンをクリック
4. 3〜5分待機（動画の長さによる）

#### ステップ3: 結果取得
分析完了後、2つのオプションが利用可能：

**オプションA: PowerPointレポート**
- 「📥 PowerPointレポートをダウンロード」ボタンをクリック
- 12スライドの詳細分析レポートを即座にダウンロード

**オプションB: Genspark AIスライド生成（より高品質なスライドが必要な場合）**
1. 画面に表示される「Genspark AIスライド生成用プロンプト」をコピー
2. Slack経由でGensparkユーザーに転送
3. Gensparkユーザーがデザイン性の高いスライドを作成
4. 完成版スライドを受領

## データフォーマット

### 配信データ（CSV/Excel）
以下のような列を含むことを推奨（列名は柔軟に対応）:
```
時間,視聴者数,いいね,コメント,クリック
0,100,5,10,2
1,150,12,15,5
2,200,20,25,8
...
```

### コメントデータ（CSV/Excel）
以下のような列を含むことを推奨:
```
時間,ユーザー名,コメント
0,user1,こんにちは!
1,user2,この商品いいですね
2,user3,買います!
...
```

## 技術スタック

### バックエンド
- **Flask 3.0.0**: Webフレームワーク
- **Pandas 2.1.4**: データ処理・分析
- **OpenCV 4.8.1.78**: 動画解析
- **Matplotlib 3.8.2 / Seaborn 0.13.0**: グラフ生成
- **python-pptx**: PowerPoint生成

### フロントエンド
- **HTML5/CSS3**: レスポンシブUI
- **Vanilla JavaScript**: 動的コンテンツ表示

### 新機能（v2.0）
- **GensparkPromptGenerator**: AI用プロンプト自動生成
- **EnhancedPowerPointGenerator**: 12スライド詳細レポート生成

## ディレクトリ構造
```
/home/user/webapp/
├── app.py                              # メインアプリケーション
├── requirements.txt                    # Python依存関係
├── analysis/                           # 分析モジュール
│   ├── __init__.py
│   ├── video_analyzer.py              # 動画分析
│   ├── data_analyzer.py               # データ分析
│   ├── comment_analyzer.py            # コメント分析
│   ├── report_generator.py            # レポート生成
│   ├── pptx_generator_enhanced.py     # 12スライドPPTX生成（v2.0）
│   └── genspark_prompt_generator.py   # Genspark用プロンプト生成（v2.0）
├── templates/                          # HTMLテンプレート
│   └── index.html
├── static/                             # 静的ファイル
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── main.js
│   └── uploads/                        # アップロードファイル保存先
├── sample_data/                        # サンプルデータ
├── DEPLOYMENT.md                       # デプロイメントガイド
├── USAGE_GUIDE.md                      # 詳細使用ガイド
├── TROUBLESHOOTING.md                  # トラブルシューティング
└── README.md
```

## 分析の知識ベース

このツールは以下の「ライブコマース成功の法則」に基づいて分析・提案を行います:

### 基本原則
- **相手ありき**: 視聴者の「見たい」を優先
- **4つの力**: Attention（集客）、Entertainment（演出）、Engagement（双方向性）、Analysis（展開）
- **構成**: FACTとSTORYの混合
- **五感表現**: 視覚・聴覚だけでなく、味覚・嗅覚・触覚・感情の描写

### 実践テクニック
- タイマーやフリップの活用
- 「今」買う理由の提示（希少性・限定性）
- 商品カードの頻繁な出し入れ
- 多角的な見せ方
- テンポの良い会話

## トラブルシューティング

### 動画ファイルが大きすぎる場合
- **推奨サイズ: 50MB未満**
- システムは自動的に動画を圧縮します（360p相当）
- それでも処理に時間がかかる場合は、事前に動画を短くカット編集することを推奨

### データ列名が認識されない場合
自動検出機能がありますが、以下の列名を使用すると確実です:
- 時間: `time`, `minute`, `時間`, `分`, `経過`
- 視聴者: `viewers`, `視聴`, `同時視聴`, `ユーザー`
- いいね: `likes`, `いいね`
- コメント: `comments`, `コメント`, `チャット`, `chat`
- クリック: `clicks`, `クリック`, `商品クリック`

### PowerPointダウンロードエラー
- セッションIDが正しいか確認
- ブラウザのキャッシュをクリア
- 別のブラウザで試す

### 詳細なトラブルシューティング
詳しくは [TROUBLESHOOTING.md](TROUBLESHOOTING.md) をご覧ください。

## 📚 関連ドキュメント

- [DEPLOYMENT.md](DEPLOYMENT.md) - デプロイメントガイド（他の環境で動かす方法）
- [USAGE_GUIDE.md](USAGE_GUIDE.md) - 詳細な使用ガイド
- [DATA_FORMATS.md](DATA_FORMATS.md) - データフォーマット仕様
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - トラブルシューティング

## 🎉 更新履歴

### v2.0.0 (2026-01-18) - Gensparkプロンプト機能
- ✅ Genspark AIスライド生成プロンプト機能を追加
- ✅ 分析レポート画面をシンプル化（ダウンロード + プロンプトのみ）
- ✅ Slack転送ワークフローガイドを追加
- ✅ 操作ガイドの更新

### v1.5.0 (2026-01-18) - 12スライドPowerPoint
- ✅ 12スライドPowerPoint生成機能（サンプルレポートベース）
- ✅ 詳細なスライド構成（カバー、KPI、時系列、分析、提案）

### v1.0.0 (2026-01-18) - 初回リリース
- ✅ 動画・データ・コメントの統合分析
- ✅ 5スライドPowerPointレポート生成

## ライセンス
MIT License

## 作成者
GenSpark AI Developer
