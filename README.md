# ライブコマース分析ツール

## 概要
ライブコマース配信の動画、配信データ、視聴者コメントを統合的に分析し、売上とエンゲージメントを最大化するための専門的なレポートを自動生成するWebアプリケーションです。

## 主な機能

### 📤 マルチファイルアップロード
- **動画ファイル**: MP4, MOV, AVI, MKV対応
- **配信データ**: CSV/Excel形式の時系列数値データ
- **コメントデータ**: CSV/Excel形式のタイムスタンプ付きコメント

### 🔍 高度な分析機能
1. **動画構造解析**: 1分ごとのキーフレーム抽出とシーン分析
2. **時系列データ分析**: 視聴者数、いいね、コメント、クリック数の推移分析
3. **ピーク検出**: 指標の急増ポイントと動画イベントの相関分析
4. **コメント分類**: 6カテゴリ（質問/驚き/ワクワク/挨拶/購入意志/その他）への自動分類
5. **統計サマリー**: 主要KPIの集計と可視化

### 📊 レポート生成
- 時系列複合グラフ（4指標の推移）
- コメント分類円グラフ
- 指標別ピーク分析
- 改善提案（Good/More/Next Actions）

## セットアップ手順

### 1. 依存関係のインストール
```bash
cd /home/user/webapp
pip install -r requirements.txt
```

### 2. アプリケーションの起動
```bash
python app.py
```

サーバーは `http://0.0.0.0:5000` で起動します。

### 3. ブラウザでアクセス
ブラウザで `http://localhost:5000` を開いてください。

## 使い方

### ステップ1: ファイルアップロード
1. ライブ動画ファイルを選択
2. 配信データ（CSV/Excel）を選択
3. コメントデータ（CSV/Excel）を選択
4. 「アップロード開始」ボタンをクリック

### ステップ2: 分析実行
1. アップロード完了後、「分析開始」ボタンが表示されます
2. クリックすると自動で分析が開始されます（数分かかる場合があります）

### ステップ3: レポート確認
分析完了後、以下の情報が表示されます:
- サマリー統計（最大視聴者数、合計いいねなど）
- 時系列指標推移グラフ
- 指標別ピーク分析（どのタイミングで何が起きたか）
- コメント分類分析
- 改善提案

## データフォーマット

### 配信データ（CSV/Excel）
以下のような列を含むことを推奨（列名は柔軟に対応）:
```
時間,視聴者数,いいね,コメント,クリック
0,100,5,10,2
1,150,12,15,5
2,200,20,25,8
...
```

### コメントデータ（CSV/Excel）
以下のような列を含むことを推奨:
```
時間,ユーザー名,コメント
0,user1,こんにちは!
1,user2,この商品いいですね
2,user3,買います!
...
```

## 技術スタック

### バックエンド
- **Flask**: Webフレームワーク
- **Pandas**: データ処理・分析
- **OpenCV**: 動画解析
- **Matplotlib/Seaborn**: グラフ生成

### フロントエンド
- **HTML5/CSS3**: レスポンシブUI
- **Vanilla JavaScript**: 動的コンテンツ表示

## ディレクトリ構造
```
/home/user/webapp/
├── app.py                      # メインアプリケーション
├── requirements.txt            # Python依存関係
├── analysis/                   # 分析モジュール
│   ├── __init__.py
│   ├── video_analyzer.py       # 動画分析
│   ├── data_analyzer.py        # データ分析
│   ├── comment_analyzer.py     # コメント分析
│   └── report_generator.py     # レポート生成
├── templates/                  # HTMLテンプレート
│   └── index.html
├── static/                     # 静的ファイル
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── main.js
│   └── uploads/                # アップロードファイル保存先
└── README.md
```

## 分析の知識ベース

このツールは以下の「ライブコマース成功の法則」に基づいて分析・提案を行います:

### 基本原則
- **相手ありき**: 視聴者の「見たい」を優先
- **4つの力**: Attention（集客）、Entertainment（演出）、Engagement（双方向性）、Analysis（展開）
- **構成**: FACTとSTORYの混合
- **五感表現**: 視覚・聴覚だけでなく、味覚・嗅覚・触覚・感情の描写

### 実践テクニック
- タイマーやフリップの活用
- 「今」買う理由の提示（希少性・限定性）
- 商品カードの頻繁な出し入れ
- 多角的な見せ方
- テンポの良い会話

## トラブルシューティング

### 動画ファイルが大きすぎる場合
システムは自動的に動画を圧縮します（360p相当）。それでも処理に時間がかかる場合は、事前に動画を短くカット編集することを推奨します。

### データ列名が認識されない場合
自動検出機能がありますが、以下の列名を使用すると確実です:
- 時間: `time`, `minute`, `時間`, `分`
- 視聴者: `viewers`, `視聴`, `同時視聴`
- いいね: `likes`, `いいね`
- コメント: `comments`, `コメント`, `チャット`
- クリック: `clicks`, `クリック`, `商品クリック`

## ライセンス
MIT License

## 作成者
GenSpark AI Developer
